set -g default-terminal "wezterm"
set -g terminal-overrides "wezterm*:RGB"

# Truecolor and terminal capabilities
set -as terminal-overrides ',*:Tc'                        # True color support
set -as terminal-overrides ',*:Smulx=\e[4::%p1%dm'        # Underline styles
set -as terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'   # Cursor shape
set -as terminal-overrides ',*:Ms=\E]52;%p1%s;%p2%s\007'  # Clipboard (OSC 52)
set -as terminal-overrides ',*:Cs=\E]12;%p1%s\007'        # Cursor color
set -as terminal-overrides ',*:Cr=\E]112\007'             # Reset cursor color
set -as terminal-overrides ',*:Cc=\E]12;%p1%s\007'        # Change cursor color
set -as terminal-overrides ',*:Setulc=\e[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # Underline colors

# Start window/pane indexing at 1 (easier to reach on keyboard)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows automatically when one is closed
set -g renumber-windows on

# Increase scrollback buffer size
set -g history-limit 50000

# Status bar refresh interval
set -g status-interval 5

# Focus events (useful for vim/neovim)
set -g focus-events on

# Aggressive resize (useful when multiple clients)
setw -g aggressive-resize on

# Reduce escape time (better for vim/neovim)
set -g escape-time 50

# Enable mouse support
setw -g mouse on

# Use vi-style key bindings in copy mode
setw -g mode-keys vi

# Change prefix from C-b to C-a (easier to reach)
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Navigate panes with vim-style keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Split panes with | and _ (more intuitive visual representation)
# Open new panes in current directory
bind | split-window -h -c "#{pane_current_path}"
bind _ split-window -v -c "#{pane_current_path}"

# Also keep default bindings with current directory
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# New windows open in current directory
bind c new-window -c "#{pane_current_path}"

# Swap panes with vim-style keys
bind -r H swap-pane -U
bind -r J swap-pane -D
bind -r K swap-pane -U
bind -r L swap-pane -D

# Resize panes with vim-style keys (repeatable with -r)
bind -r C-h resize-pane -L 5
bind -r C-j resize-pane -D 5
bind -r C-k resize-pane -U 5
bind -r C-l resize-pane -R 5

# TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'

# Rose Pine theme
set -g @plugin 'rose-pine/tmux'
set -g @rose_pine_variant 'moon'
set -g @rose_pine_user 'on'
set -g @rose_pine_host 'on'
set -g @rose_pine_hostname_short 'on'
set -g @rose_pine_directory 'on'
set -g @rose_pine_bar_bg_disable 'on'
set -g @rose_pine_bar_bg_disabled_color_option 'default'
set -g @rose_pine_show_current_program 'on'

# Initialize TPM (keep this at the very bottom)
run '~/.config/tmux/plugins/tpm/tpm'
